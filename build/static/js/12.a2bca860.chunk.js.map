{"version":3,"file":"static/js/12.a2bca860.chunk.js","mappings":"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","sources":["pages/SetUsername.jsx","utils/Debounce.js","utils/APIRoutes.js","utils/FirebaseConfig.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/@babel/runtime/helpers/esm/get.js"],"sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styled from \"styled-components\";\r\nimport {ToastContainer,toast} from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport axios from \"axios\";\r\nimport { checkUsernameRoute, registerRoute } from '../utils/APIRoutes';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { firebaseAuth } from '../utils/FirebaseConfig';\r\nimport { debounce } from '../utils/Debounce';\r\n\r\nexport default function SetUsername(){\r\n    const navigate = useNavigate();\r\n    onAuthStateChanged(firebaseAuth,(userData) => {\r\n        if(!userData){//if user doesnt exist \r\n            navigate(\"/login\");\r\n        }\r\n        else{\r\n            setEmail(userData.email ? userData.email : userData.providerData[0].email);\r\n        }\r\n    })\r\n    const [values,setValues] = useState(\"\");\r\n    const [label,setLabel] = useState(\"\");\r\n    const [email,setEmail] = useState(undefined);\r\n    const [userNameStatus,setUserNameStatus] = useState(undefined);\r\n    const toastOptions = {\r\n      position: \"bottom-right\",\r\n      autoClose:8000,\r\n      pauseOnHover: true,\r\n      draggable: true,\r\n      theme: 'dark',\r\n    }\r\n    useEffect(()=> {\r\n      if(localStorage.getItem('snappy-user')){//If user already logged-in before\r\n            navigate('/')\r\n      }\r\n    },[]);\r\n    const handleSubmit = async (event)=>{\r\n        event.preventDefault();\r\n        //if username and password correct\r\n        if(handleValidation()){\r\n            try{\r\n                  const {data} = await axios.post(registerRoute,{\r\n                        username:values,\r\n                        email,\r\n                        password:(Math.random()+1).toString(20).substring(1),\r\n                      });\r\n                      if(data.status===false){\r\n                        toast.error(data.msg, toastOptions);\r\n                      }\r\n                      if(data.status===true){\r\n                        localStorage.setItem('snappy-user',JSON.stringify(data.user))\r\n                        navigate(\"/\");\r\n                      }\r\n            }\r\n            catch(err){\r\n                  toast.error(err, toastOptions);\r\n            }\r\n        };\r\n    };\r\n    \r\n    const handleValidation = ()=>{\r\n      //destructure password and username from values and store it in password and username variables\r\n      if(values.length<3){\r\n            toast.error(\"Username is required and should be greater than 3 characters\",toastOptions);\r\n          return false;\r\n      } \r\n      return true;\r\n    };\r\n\r\n    //debounce func to reduce the api calls\r\n    //api call after every 300ms \r\n    const handleChange = debounce((name) => checkUsername(name),300);\r\n    const checkUsername = async (username) => {\r\n      if(username.length>3){\r\n        //axios automatically convert data to json format\r\n        const {data} = await axios.post(checkUsernameRoute,{username});\r\n        console.log(data);\r\n        setUserNameStatus(data.status);\r\n        setLabel(data.msg);\r\n        setValues(username);\r\n      }\r\n    }\r\n      return (\r\n        <>\r\n            <FormContainer>\r\n                <form onSubmit={(event)=>handleSubmit(event)}>\r\n                    <span>Check Username Availibility</span>\r\n                    <div className='row'>\r\n                    <input type=\"text\" placeholder='Username' name=\"username\" onChange={(e)=>handleChange(e.target.value)} \r\n                    min=\"3\" className={`${userNameStatus ? \"success\" : userNameStatus !== undefined ? \"danger\" : \"\"}`}/>\r\n                    <label htmlFor='' \r\n                    className={`${userNameStatus ? \"success\" : userNameStatus !== undefined ? \"danger\" : \"\"}`}>\r\n                      {label}\r\n                    </label>\r\n                    </div>\r\n                    <button type='submit' className='btn'>Create User</button>\r\n                </form>\r\n            </FormContainer>\r\n            <ToastContainer />\r\n        </>\r\n      )\r\n}\r\n\r\nconst FormContainer = styled.div`\r\n  height: 100vh;\r\n  width: 100vw;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  align-items: center;\r\n  background-color: #131324;\r\n  .row{\r\n    label{\r\n      display:block;\r\n      margin: 10px 0 0 5px;\r\n      transition: 0.3s ease-in-out;\r\n      height: 0.5rem;\r\n    }\r\n    label.success{\r\n      color: #39ff14;\r\n    }\r\n    label.danger{\r\n      color: #ff3131;\r\n    }\r\n  }\r\n   form {\r\n     display: flex;\r\n     flex-direction: column;\r\n     gap: 2rem;\r\n     background-color: #00000076;\r\n     border-radius: 2rem;\r\n     padding: 3rem 5rem;\r\n   }\r\n   input {\r\n     background-color: transparent;\r\n     padding: 1rem;\r\n     border: 0.1rem solid #4e0eff;\r\n     border-radius: 0.4rem;\r\n     color: white;\r\n     width: 100%;\r\n     font-size: 1rem;\r\n     &:focus {\r\n       border: 0.1rem solid #997af0;\r\n       outline: none;\r\n     }\r\n   }\r\n   .success{\r\n    border-color:#39ff14;\r\n    &:focus{\r\n      border-color:#39ff14;\r\n    }\r\n   }\r\n   .danger{\r\n    border-color:#ff3131;\r\n    &:focus{\r\n      border-color:#ff3131;\r\n    }\r\n   }\r\n   .btn {\r\n     background-color: #4e0eff;\r\n     color: white;\r\n     padding: 1rem 2rem;\r\n     border: none;\r\n     font-weight: bold;\r\n     cursor: pointer;\r\n     border-radius: 0.4rem;\r\n     font-size: 1rem;\r\n     text-transform: uppercase;\r\n   }\r\n   span {\r\n     color: white;\r\n     text-transform: uppercase;\r\n   }\r\n`; ","//Debounce reduces the no of api calls made \r\n//It is called using timeout\r\n//It is reusable function and we will reuse this functionalty in many places\r\n//It improves the performance of application drastically\r\n//This func will check for certain amt of time that if the func was called\r\n//and it will take the timeout and call after a certain amt of time the func\r\n//here call func after 300ms and if func called again before 300ms then it will again wait for 300ms and then call\r\nexport const debounce = (fn,timeout=300) => {\r\n    let timer;//we define the timer we didnt provide any value\r\n    return (...args) => {//return arrowfunc with arg that has been provided we destructure it\r\n        clearTimeout(timer);//we cleartimeout //if func called again before 300ms \r\n        //then debounce func will be recalled on every key stored\r\n        timer=setTimeout(() => {//We will set timer\r\n            fn.apply(this,args);//we pass fn.apply //this is higher order func \r\n            //wepassed this and the arguements that was passed to debounce func\r\n            //this is provided for the lexical scope\r\n        },timeout);\r\n    };\r\n};\r\n","//host is backend address\r\nexport const port = 5001;\r\nexport const host = `http://localhost:${port}`;\r\nexport const loginRoute = `${host}/api/auth/login`;\r\nexport const registerRoute = `${host}/api/auth/register`;\r\nexport const setAvatarRoute = `${host}/api/auth/setavatar`;\r\nexport const allUsersRoute = `${host}/api/auth/allusers`;\r\nexport const sendMessageRoute = `${host}/api/messages/addmsg`; \r\nexport const getAllMessagesRoute = `${host}/api/messages/getmsg`;   \r\nexport const firebaseLoginRoute = `${host}/api/auth/firebaselogin`;\r\nexport const checkUsernameRoute = `${host}/api/auth/checkusername`;","import {initializeApp} from 'firebase/app';\r\nimport {getAuth} from 'firebase/auth'\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDhKsk5wquh5RsnSdhd7MXTDMsQJj9BTcQ\",\r\n    authDomain: \"chat-app-a1e59.firebaseapp.com\",\r\n    projectId: \"chat-app-a1e59\",\r\n    storageBucket: \"chat-app-a1e59.appspot.com\",\r\n    messagingSenderId: \"1095818564053\",\r\n    appId: \"1:1095818564053:web:417c6c509d67e1d9b9ed5c\",\r\n    measurementId: \"G-W86GEL5XRN\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const firebaseAuth = getAuth(app);","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get.apply(this, arguments);\n}"],"names":["SetUsername","navigate","useNavigate","onAuthStateChanged","firebaseAuth","userData","setEmail","email","providerData","useState","values","setValues","label","setLabel","undefined","userNameStatus","setUserNameStatus","toastOptions","position","autoClose","pauseOnHover","draggable","theme","useEffect","localStorage","getItem","handleSubmit","event","preventDefault","handleValidation","axios","registerRoute","username","password","Math","random","toString","substring","data","status","toast","msg","setItem","JSON","stringify","user","length","handleChange","fn","timer","timeout","args","clearTimeout","setTimeout","apply","debounce","name","checkUsername","checkUsernameRoute","console","log","FormContainer","onSubmit","className","type","placeholder","onChange","e","target","value","min","htmlFor","styled","host","loginRoute","setAvatarRoute","allUsersRoute","sendMessageRoute","getAllMessagesRoute","firebaseLoginRoute","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","getAuth","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","i","F","s","n","done","_e","f","TypeError","err","normalCompletion","didErr","call","step","next","_e2","_superPropBase","object","property","Object","prototype","hasOwnProperty","getPrototypeOf","_get","Reflect","get","bind","receiver","base","desc","getOwnPropertyDescriptor","arguments","this"],"sourceRoot":""}