"use strict";(self.webpackChunksnappy=self.webpackChunksnappy||[]).push([[197],{6571:function(n,e,r){r(2791);e.Z=r.p+"static/media/logo.ccfbd90732828204fa6989c0f15638c0.svg"},4765:function(n,e,r){r.r(e),r.d(e,{default:function(){return V}});var t,a=r(168),i=r(4165),c=r(5861),s=r(885),o=r(2791),d=r(6444),u=r(4569),l=r.n(u),m=r(7689),f=r(8204),h=r(6571),g=r(184);function p(n){var e=n.contacts,r=n.currentUser,t=n.changeChat,a=(0,o.useState)(void 0),i=(0,s.Z)(a,2),c=i[0],d=i[1],u=(0,o.useState)(void 0),l=(0,s.Z)(u,2),m=l[0],f=l[1],p=(0,o.useState)(void 0),x=(0,s.Z)(p,2),b=x[0],j=x[1];(0,o.useEffect)((function(){r&&(f(r.avatarImage),d(r.username))}),[r]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(v,{children:[(0,g.jsxs)("div",{className:"brand",children:[(0,g.jsx)("img",{src:h.Z,alt:"logo"}),(0,g.jsx)("h3",{children:"Snappy"})]}),(0,g.jsx)("div",{className:"contacts",children:e.map((function(n,e){return(0,g.jsxs)("div",{className:"contact ".concat(e===b?"selected":""),onClick:function(){!function(n,e){j(n),t(e)}(e,n)},children:[(0,g.jsx)("div",{className:"avatar",children:(0,g.jsx)("img",{src:"data:image/svg+xml;base64,".concat(n.avatarImage),alt:""})}),(0,g.jsx)("div",{className:"username",children:(0,g.jsx)("h3",{children:n.username})})]},e)}))}),(0,g.jsxs)("div",{className:"current-user",children:[(0,g.jsx)("div",{className:"avatar",children:(0,g.jsx)("img",{src:"data:image/svg+xml;base64,".concat(m),alt:""})}),(0,g.jsx)("div",{className:"username",children:(0,g.jsx)("h2",{children:c})})]})]})})}var x,v=d.ZP.div(t||(t=(0,a.Z)(["\n    display:grid;\n    grid-template-rows: 10% 75% 15%;\n    overflow: hidden;\n    background-color: #080420;\n    .brand{\n        display:flex;\n        align-items:center;\n        justify-content:center;\n        gap:1rem;\n        img{\n            height: 2rem;\n        }\n        h3{\n            color:white;\n            text-transform:uppercase;\n        }\n    }\n    .contacts{\n        display:flex;\n        flex-direction:column;\n        align-items:center;\n        overflow:auto;\n        gap:0.8rem;\n        &::-webkit-scrollbar{\n            width:0.2rem;\n            &-thumb{\n                background-color: #ffffff39;\n                width:0.1rem;\n                border-radius:1rem;\n            }\n        }\n        .contact{\n            background-color: #ffffff39;\n            min-height:5rem;\n            width:90%;\n            cursor:pointer;\n            border-radius:0.2rem;\n            padding: 0.4rem;\n            gap: 1rem;\n            align-items: center;\n            display: flex;\n            transition: 0.5s ease-in-out;\n            .avatar{\n                img{\n                    height:3rem;\n                }\n            }\n            .username{\n                h3{\n                    color:white;\n                }\n            }\n        }\n        .selected{\n            background-color: #9186f3;\n        }\n    }\n    .current-user{\n        background-color: #0d0d30;\n        display:flex;\n        justify-content:center;\n        align-items:center;\n        gap: 2rem;\n        .avatar{\n            img{\n                height:4rem;\n                max-inline-size: 100%;\n            }\n        }\n        .username{\n            h2{\n                color:white;\n            }\n        }\n        @media screen and (min-width: 720px) and (max-width: 1080px) {\n            gap:0.5rem;\n            .username{\n                h2{\n                    font-size:1rem;\n                }\n            }\n          }\n    }\n"]))),b=r.p+"static/media/robot.0617a41936621e9697cd.gif";function j(n){var e=n.currentUser;return(0,g.jsxs)(k,{children:[(0,g.jsx)("img",{src:b,alt:"Robot"}),(0,g.jsxs)("h1",{children:["Welcome, ",(0,g.jsxs)("span",{children:[e.username,"!"]})]}),(0,g.jsx)("h3",{children:"Please select a chat to start messaging "})]})}var w,k=d.ZP.div(x||(x=(0,a.Z)(["\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    flex-direction:column;\n    color:white;\n    img{\n        height:20rem;\n    }\n    span{\n        color:#4e00ff;\n    }\n"]))),Z=r(2982),y=r(2975),S=r.n(y),N=r(4373),C=r(9126);function E(n){var e=n.handleSendMsg,r=(0,o.useState)(!1),t=(0,s.Z)(r,2),a=t[0],i=t[1],c=(0,o.useState)(""),d=(0,s.Z)(c,2),u=d[0],l=d[1];return(0,g.jsxs)(z,{children:[(0,g.jsx)("div",{className:"button-container",children:(0,g.jsxs)("div",{className:"emoji",children:[(0,g.jsx)(C.IZ1,{onClick:function(){i(!a)}}),a&&(0,g.jsx)(S(),{onEmojiClick:function(n,e){var r=u;r+=e.emoji,l(r)}})]})}),(0,g.jsxs)("form",{className:"input-container",onSubmit:function(n){return n.preventDefault(),void(u.length>0&&(e(u),l("")))},children:[(0,g.jsx)("input",{type:"text",placeholder:"type your message here",value:u,onChange:function(n){return l(n.target.value)}}),(0,g.jsx)("button",{className:"submit",children:(0,g.jsx)(N.ghy,{})})]})]})}var _,z=d.ZP.div(w||(w=(0,a.Z)(["\n  display: grid;\n  align-items: center;\n  grid-template-columns: 5% 95%;\n  background-color: #080420;\n  padding: 0 2rem;\n  @media screen and (min-width: 720px) and (max-width: 1080px) {\n    padding: 0 1rem;\n    gap: 1rem;\n  }\n  .button-container {\n    display: flex;\n    align-items: center;\n    color: white;\n    gap: 1rem;\n    .emoji {\n      position: relative;\n      svg {\n        font-size: 1.5rem;\n        color: #ffff00c8;\n        cursor: pointer;\n      }\n      .emoji-picker-react {\n        position: absolute;\n        top: -350px;\n        background-color: #080420;\n        box-shadow: 0 5px 10px #9a86f3;\n        border-color: #9a86f3;\n        .emoji-scroll-wrapper::-webkit-scrollbar {\n          background-color: #080420;\n          width: 5px;\n          &-thumb {\n            background-color: #9a86f3;\n          }\n        }\n        .emoji-categories {\n          button {\n            filter: contrast(0);\n          }\n        }\n        .emoji-search {\n          background-color: transparent;\n          border-color: #9a86f3;\n        }\n        .emoji-group:before {\n          background-color: #080420;\n        }\n      }\n    }\n  }\n  .input-container {\n    width: 100%;\n    border-radius: 2rem;\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    background-color: #ffffff34;\n    input {\n      width: 90%;\n      height: 60%;\n      background-color: transparent;\n      color: white;\n      border: none;\n      padding-left: 1rem;\n      font-size: 1.2rem;\n\n      &::selection {\n        background-color: #9a86f3;\n      }\n      &:focus {\n        outline: none;\n      }\n    }\n    button {\n      padding: 0.3rem 2rem;\n      border-radius: 2rem;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      background-color: #9a86f3;\n      border: none;\n      @media screen and (min-width: 720px) and (max-width: 1080px) {\n        padding: 0.3rem 1rem;\n        svg {\n          font-size: 1rem;\n        }\n      }\n      svg {\n        font-size: 2rem;\n        color: white;\n      }\n    }\n  }\n"]))),I=r(7692);function P(){var n=(0,m.s0)(),e=function(){var e=(0,c.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear(),n("/login");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,g.jsx)(D,{onClick:e,children:(0,g.jsx)(I.t7h,{})})}var U,D=d.ZP.button(_||(_=(0,a.Z)(["\n    display:flex;\n    justify-content:center;\n    align-items:center;\n    padding: 0.5rem;\n    border-radius:0.5rem;\n    background-color:#9a86f3;\n    border:none;\n    cursor:pointer;\n    svg{\n        font-size:1.3rem;\n        color: #ebe7ff;\n    }\n"])));d.ZP.div(U||(U=(0,a.Z)(["\n    height: 80%;\n\n"])));var F,J=r(4261);function R(n){var e=n.currentChat,r=n.currentUser,t=n.socket,a=(0,o.useRef)(),d=(0,o.useState)([]),u=(0,s.Z)(d,2),m=u[0],h=u[1],p=(0,o.useState)(null),x=(0,s.Z)(p,2),v=x[0],b=x[1];(0,o.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,i.Z)().mark((function n(){var t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,l().post(f.Ds,{from:r._id,to:e._id});case 3:t=n.sent,h(t.data);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e]);var j=function(){var n=(0,c.Z)((0,i.Z)().mark((function n(a){var c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l().post(f.JC,{from:r._id,to:e._id,message:a});case 2:t.current.emit("send-msg",{to:e._id,from:r._id,message:a}),(c=(0,Z.Z)(m)).push({fromSelf:!0,message:a}),h(c);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,o.useEffect)((function(){t.current&&t.current.on("msg-recieve",(function(n){b({fromSelf:!1,message:n})}))}),[]),(0,o.useEffect)((function(){v&&h((function(n){return[].concat((0,Z.Z)(n),[v])}))}),[v]),(0,o.useEffect)((function(){var n;null===(n=a.current)||void 0===n||n.scrollIntoView({behaviour:"smooth"})}),[m]),(0,g.jsx)(g.Fragment,{children:e&&(0,g.jsxs)(K,{children:[(0,g.jsxs)("div",{className:"chat-header",children:[(0,g.jsxs)("div",{className:"user-details",children:[(0,g.jsx)("div",{className:"avatar",children:(0,g.jsx)("img",{src:"data:image/svg+xml;base64,".concat(e.currentUserImage),alt:""})}),(0,g.jsx)("div",{className:"username",children:(0,g.jsx)("h3",{children:e.username})})]}),(0,g.jsx)(P,{})]}),(0,g.jsx)("div",{className:"chat-messages",children:m.map((function(n){return(0,g.jsx)("div",{ref:a,children:(0,g.jsx)("div",{className:"message ".concat(n.fromSelf?"sended":"recieved"),children:(0,g.jsx)("div",{className:"content",children:(0,g.jsx)("p",{children:n.message})})})},J.Z)}))}),(0,g.jsx)(E,{handleSendMsg:j})]})})}var A,K=d.ZP.div(F||(F=(0,a.Z)(["\n    padding-top:1rem;\n    display:grid;\n    grid-template-rows: 10% 78% 12%;\n    gap: 0.1rem;\n    overflow: hidden;\n    @media screen and (min-width:720px) and (max-width:1080px){\n        grid-template-rows: 15% 70% 15%;\n    }\n    .chat-header{\n        display:flex;\n        justify-content:space-between;\n        align-items:center;\n        padding: 0 2rem;\n        .user-details{\n            display:flex;\n            align-items:center;\n            gap:1rem;\n            .avatar{\n                img{\n                    height:3rem;\n\n                }\n            }\n            .username{\n                h3{\n                    color:white;\n                }\n            }\n        }\n    }\n    .chat-messages{\n        padding: 1rem 2rem;\n        display: flex;\n        flex-direction:column;\n        gap:1rem;\n        overflow: auto;\n        &::-webkit-scrollbar{\n            width: 0.2rem;\n            &-thumb{\n                background-color: #ffffff39;\n                width: 0.1rem;\n                border-radius: 1rem;\n            }\n        }\n        .message{\n            display:flex;\n            align-items:center;\n            .content{\n                max-width:40%;\n                overflow-wrap:break-word;\n                padding: 1rem;\n                font-size: 1.1rem;\n                border-radius: 1rem;\n                color: #d1d1d1;\n            }\n        }\n        .sended{\n            justify-content: flex-end;\n            .content{\n                background-color:#4f04ff21;\n            }\n        }\n        .recieved{\n            justify-content:flex-start;\n            .content{\n                background-color:#9900ff20;\n            }\n        }\n    }\n"]))),M=r(4428);function V(){var n=(0,o.useRef)(),e=(0,m.s0)(),r=(0,o.useState)([]),t=(0,s.Z)(r,2),a=t[0],d=t[1],u=(0,o.useState)(void 0),h=(0,s.Z)(u,2),x=h[0],v=h[1],b=(0,o.useState)(void 0),w=(0,s.Z)(b,2),k=w[0],Z=w[1],y=(0,o.useState)(!1),S=(0,s.Z)(y,2),N=S[0],C=S[1];(0,o.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,i.Z)().mark((function n(){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(localStorage.getItem("snappy-user")){n.next=4;break}e("/login"),n.next=10;break;case 4:return n.t0=v,n.next=7,JSON.parse(localStorage.getItem("snappy-user"));case 7:n.t1=n.sent,(0,n.t0)(n.t1),C(!0);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,o.useEffect)((function(){x&&(n.current=(0,M.io)(f.ho),n.current.emit("add-user",x._id))}),[x]),(0,o.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,i.Z)().mark((function n(){var r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!x){n.next=9;break}if(!x.isAvatarImageSet){n.next=8;break}return n.next=4,l().get("".concat(f.pK,"/").concat(x._id));case 4:r=n.sent,d(r.data),n.next=9;break;case 8:e("/setAvatar");case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[x]);return(0,g.jsx)(O,{children:(0,g.jsxs)("div",{className:"container",children:[(0,g.jsx)(p,{contacts:a,currentUser:x,changeChat:function(n){Z(n)}}),N&&void 0==k?(0,g.jsx)(j,{currentUser:x}):(0,g.jsx)(R,{currentChat:k,currentUser:x,socket:n})]})})}var O=d.ZP.div(A||(A=(0,a.Z)(["\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 1rem;\n  align-items: center;\n  background-color: #131324;\n  .container {\n    height: 85vh;\n    width: 85vw;\n    background-color: #00000076;\n    display: grid;\n    grid-template-columns: 25% 75%;\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\n      grid-template-columns: 35% 65%;\n    }\n  }\n"])))},8204:function(n,e,r){r.d(e,{Ds:function(){return d},F4:function(){return u},JC:function(){return o},TC:function(){return c},VU:function(){return a},X0:function(){return i},_d:function(){return l},ho:function(){return t},pK:function(){return s}});var t="http://localhost:".concat(5001),a="".concat(t,"/api/auth/login"),i="".concat(t,"/api/auth/register"),c="".concat(t,"/api/auth/setavatar"),s="".concat(t,"/api/auth/allusers"),o="".concat(t,"/api/messages/addmsg"),d="".concat(t,"/api/messages/getmsg"),u="".concat(t,"/api/auth/firebaselogin"),l="".concat(t,"/api/auth/checkusername")}}]);
//# sourceMappingURL=197.fa3d0726.chunk.js.map